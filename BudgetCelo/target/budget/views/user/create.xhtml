<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">
<ui:composition template="/views/templates/baseTemplate.xhtml">

	<ui:define name="pageHeader">
		<h2>Register</h2>
	</ui:define>

	<ui:define name="content">
		<h:form id="registerForm">
			<p:growl id="message" autoUpdate="true"/>
			<p:panel styleClass="sectionPanel blankBackground">
				<h:panelGrid columns="2">

					<p:outputLabel value="Name" for="name" />
					<p:inputText id="name" 
								 value="#{userController.user.name}"
								 required="true"
								 requiredMessage="Name is required" />

					<p:outputLabel value="Surname" for="surname" />
					<p:inputText id="surname" 
								 value="#{userController.user.surname}"
								 required="true" 
								 requiredMessage="Surname is required"/>

					<p:outputLabel value="ID No." for="idNumber" />
					<p:inputMask id="idNumber" 
								 value="#{userController.user.IDNumber}"
						         required="true"
						         requiredMessage="ID No. is required" 
						         mask="999999 9999 999"/>

					<p:outputLabel value="Date Of Birth" for="dob" />
					<p:calendar id="dob"
								value="#{userController.dateOfBirth}"
								pattern="dd-MMMM-yyyy"
								locale="em"
								required="true" 
								requiredMessage="Date of Birth is required"/>

					<p:outputLabel value="Cellphone No." for="cellphone" />
					<p:inputMask id="cellphone"
								 value="#{userController.user.cellphone}"
						 		 mask="999-999-9999"/>

					<p:outputLabel value="Income" for="income" />
					<p:inputNumber id="income" 
								   value="#{userController.user.income}" />

					<p:outputLabel value="Email Address" for="email" />
					<p:inputText id="email" 
								value="#{userController.user.email}" 
								validatorMessage="Email Address is invalid"
								autocomplete="false"
								required="true"
								requiredMessage="Email Address is required">
								
						<f:validator validatorId="custom.emailValidator" />
					</p:inputText>

					<p:outputLabel value="Password" for="password" />
					<p:password id="password" 
								value="#{userController.password}"
								required="true" 
								requiredMessage="Password is a required"
								autocomplete="false"/>

					<p:outputLabel value="Confirm Password" for="cpassword"/>
					<p:password id="cpassword" 
								value="#{userController.confirmPassword}"
								required="true" 
								requiredMessage="Password Confirmation is required" />

				</h:panelGrid>
				<br />

				<p:commandButton value="REGISTER" validateClient="true"
					action="#{userController.register()}" ajax="true"
					update=":registerForm"
					 />
			</p:panel>


		</h:form>
		<script type="text/javascript">
	    PrimeFaces.validator['custom.emailValidator'] = {
	 
	        pattern: /\S+@\S+/,
	 
	        validate: function(element, value) {
	            //use element.data() to access validation metadata, in this case there is none.
	            if(!this.pattern.test(value)) {
	                throw {
	                    summary: value + 'Validation Error.',
	                    detail: value + ' is not a valid email.'
	                }
	            }
	        }
	    };
	</script>

	</ui:define>
</ui:composition>
</html>